{
    "$schema": "https://raw.githubusercontent.com/Microsoft/azure-pipelines-task-lib/master/tasks.schema.json",
    "id": "76fdf717-3934-43da-94f3-3a4d75429686",
    "name": "ClickOnceMore-PS-Build",
    "friendlyName": "ClickOnceMore PS Build Task",
    "description": "Build a ClickOnceMore project to publish ClickOnce manifests",
    "helpMarkDown": "",
    "category": "Utility",
    "author": "Red Sky Software",
    "version": {
        "Major": 0,
        "Minor": 23,
        "Patch": 0
    },
    "instanceNameFormat": "ClickOnceMore Build $(projectFile)",
    "groups": [
        {
            "name": "overrides",
            "displayName": "Optional Overrides",
            "isExpanded": false
        }
    ],
    "inputs": [
        {
            "name": "projectFile",
            "type": "string",
            "label": "Project File (.csproj)",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "The ClickOnceMore project file (.csproj) which can be created using ClickOnceMore (www.clickoncemore.net)"
        },
        {
            "name": "buildLicence",
            "type": "string",
            "label": "Build Licence",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Your ClickOnceMore build licence. Email support@redskysoftware.com for more info"
        },
        {
            "name": "configuration",
            "type": "pickList",
            "label": "Configuration",
            "defaultValue": "release",
            "required": true,
            "helpMarkDown": "This will replace the [DebugOrRelease] macro with the value 'Release' or 'Debug' in all macro affected fields.",
            "options": {
                "release": "Release",
                "debug": "Debug"
            }            
        },
        {
            "name": "version",
            "type": "string",
            "label": "Version",
            "required": false,
            "groupName": "optionalOverrides",
            "helpMarkDown": "Override the application version specified in the project file. Version must be in the form x.x.x.x (Major, Minor, Release, Build). This uses the given version to build the ClickOnce manifests as well as using the given version to replace the [ProductVersion] macro."
        },
        {
            "name": "outputDirectory",
            "type": "string",
            "label": "Output Directory",
            "required": false,
            "groupName": "optionalOverrides",
            "helpMarkDown": "Override the output directory used by the project. This will cause the ClickOnce manifests to be built to the specified location, rather than the output directory set in the project."
        },
        {
            "name": "deploymentManifestFilename",
            "type": "string",
            "label": "Deployment Manifest Filename",
            "required": false,
            "groupName": "optionalOverrides",
            "helpMarkDown": "Override the deployment manifest filename. This will cause the ClickOnce deployment manifest to be built with the specified filename, rather than the filename set in the project."
        },
        {
            "name": "applicationManifestFilename",
            "type": "string",
            "label": "Application Manifest Filename",
            "required": false,
            "groupName": "optionalOverrides",
            "helpMarkDown": "Override the application manifest filename. This will cause the ClickOnce application manifest to be built with the specified filename, rather than the filename set in the project."
        },
        {
            "name": "deploymentUrl",
            "type": "string",
            "label": "Deployment URL",
            "required": false,
            "groupName": "optionalOverrides",
            "helpMarkDown": "Override the deployment URL (the URL the application will be deployed from). This overrides the setting specified in the project file."
        },
        {
            "name": "signingCertificateFilename",
            "type": "string",
            "label": "Signing Certificate Filename",
            "required": false,
            "groupName": "optionalOverrides",
            "helpMarkDown": "Override the signing certificate filename to use a different certificate than the one specified in the project file. You can also override the password and timestamp URL for the certificate."
        },
        {
            "name": "signingCertificatePassword",
            "type": "string",
            "label": "Signing Certificate Password",
            "required": false,
            "groupName": "optionalOverrides",
            "helpMarkDown": "Override the signing certificate password."
        },
        {
            "name": "signingCertificateTimestamp",
            "type": "string",
            "label": "Signing Certificate Timestamp",
            "required": false,
            "groupName": "optionalOverrides",
            "helpMarkDown": "Override the signing certificate URL timestamp."
        },
        {
            "name": "useDotDeploy",
            "type": "pickList",
            "label": "Use .deploy File Extensions",
            "required": false,
            "groupName": "optionalOverrides",
            "helpMarkDown": "Override the value of 'Use .deploy file extensions'. See Project Properties for more details.",
            "options": {
                "true": "true",
                "false": "false"
            }
        }
    ],
    "execution": {
        "PowerShell3": {
            "target": "powershell.ps1",
            "platforms": [
                "windows"
            ],
            "workingDirectory": "$(currentDirectory)"
        }
    }
}