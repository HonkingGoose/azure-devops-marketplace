{
    "id": "6292a058-d4f5-407b-b6c6-815df9ee59d6",
    "name": "Veracode",
    "friendlyName": "Veracode Upload and Scan",
    "description": "Upload binaries to Veracode for static application security testing",
    "helpMarkDown": "[Veracode](http://www.veracode.com)",
    "category": "Build",
    "visibility": [
                "Build",    
                "Release"
                  ],
    "author": "Veracode",
    "demands": [
        "java"
    ],
    "version": {
        "Major": 1,
        "Minor": 1,
        "Patch": 1
    },
   "instanceNameFormat": "Upload and Scan: $(filepath)",
   "groups": [
     {
         "name": "advanced",
         "displayName": "Advanced",
         "isExpanded": false
     }  
   ],
   "inputs": [
        { 
            "name": "filepath", 
            "type": "string", 
            "label": "Filepath", 
            "defaultValue": "", 
            "required": true,
            "helpMarkDown": "-filepath option. Filepath or folderpath of the file or directory to upload."
        },
        {
            "name": "veracodeAppProfile",
            "type": "string",
            "required": true,
            "label": "Veracode Application Name",
            "helpMarkDown": "-appname option. Veracode Application name."
        }, 
        {
            "name":"createProfile",
            "type": "boolean",
            "required": true,
            "defaultValue": true,
            "label": "Create Application Profile",
            "helpMarkDown": "-createprofile option. True to create a new application profile."
        },
        {
            "name": "version",
            "type": "string",
            "required": true,
            "label": "Scan Name",
            "defaultValue": "$(build.buildNumber)",
            "helpMarkDown": "-version option. The name or version number of the new or updated build."
        },
        {
            "name": "credentialsType",
            "type": "pickList",
            "label": "Credentials Type",
            "required": true,
            "defaultValue": "usernamePassword",
            "helpMarkDown": "Select the credentials type you wish to log in with.",
            "options": {
                "usernamePassword": "Username/Password",
                "idKey": "ID/Key"
            }
        },
        {
            "name": "username",
            "type": "string",
            "label": "Username",
            "required": true,
            "helpMarkDown": "-vuser option.",
            "visibleRule": "credentialsType = usernamePassword"
        }, 
        {
            "name": "password",
            "type": "string",
            "label": "Password",
            "required": true,
            "helpMarkDown": "-vpassword option.",
            "visibleRule": "credentialsType = usernamePassword"
        },
        {
            "name": "vid",
            "type": "string",
            "label": "ID",
            "required": true,
            "helpMarkDown": "-vid option.",
            "visibleRule": "credentialsType = idKey"
        }, 
        {
            "name": "vkey",
            "type": "string",
            "label": "Key",
            "required": true,
            "helpMarkDown": "-vkey option.",
            "visibleRule": "credentialsType = idKey"
        },
        {
            "name": "sandboxId",
            "type": "string",
            "label": "Sandbox ID",
            "required": false,
            "helpMarkDown": "-sandboxid option.",
            "groupName": "advanced"
        },
        {
            "name": "optargs",
            "type": "string",
            "label": "Optional Arguments",
            "required": false,
            "helpMarkDown": "Any additional options specified here will be passed to the Veracode API Wrapper.",
            "groupName": "advanced"
        }
    ],
    "messages": 
     {
         "uploadAndScanError": "Veracode upload and scan failed.",
         "javaNotFoundError": "java is not found in the path"
     },
    "execution": {
        "Node": {
            "target": "veracode.js",
            "argumentFormat": ""
        }
    }
}
