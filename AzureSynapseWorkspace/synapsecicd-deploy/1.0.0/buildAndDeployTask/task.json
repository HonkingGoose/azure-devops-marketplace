{
  "id": "51060321-a461-4140-9787-1b28345a576d",
  "name": "Synapse workspace deployment",
  "friendlyName": "Synapse workspace deployment",
  "description": "Deployment task for synapse workspace.",
  "helpMarkDown": "Displays the name of your extension.",
  "category": "Utility",
  "visibility": [
    "Build",
    "Release"
  ],
  "author": "Microsoft Corporation",
  "version": {
    "Major": 0,
    "Minor": 1,
    "Patch": 0
  },
  "groups": [
    {
      "name": "advanced",
      "displayName": "Advanced",
      "isExpanded": false
    }
  ],
  "minimumAgentVersion": "2.0.0",
  "inputs": [
    {
      "name": "repositoryType",
      "type": "pickList",
      "label": "Repository Type",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Select the repository type that you want to use for storing your artifacts.",
      "options": {
        "GitHub": "GitHub",
        "Azure Devops": "Azure Devops"
      },
      "properties": {
        "EditableOptions": "False"
      }
    },
    {
      "name": "gitConnection",
      "type": "connectedService:github:OAuth,PersonalAccessToken,InstallationToken,Token",
      "label": "Repository connection",
      "defaultValue": "",
      "required": true,
      "visibleRule": "repositoryType = GitHub",
      "helpMarkDown": "Select an authentication connection type to use when linking to your repository. Open Authentication (Oauth2) and Personal Access Token (PAT) authentication types are supported."
    },
    {
      "name": "repositoryName",
      "type": "pickList",
      "label": "Repository Name",
      "defaultValue": "",
      "required": true,
      "visibleRule": "repositoryType = GitHub",
      "helpMarkDown": "Specify the name of the github repository.",
      "properties": {
        "EditableOptions": "True"
      }
    },
    {
      "name": "azureRepoConnection",
      "type": "connectedService:externaltfs",
      "label": "Azure Repo Connection (PAT)",
      "defaultValue": "",
      "required": true,
      "visibleRule": "repositoryType = Azure Devops",
      "helpMarkDown": "Specify the name of the Azure Repo service connection to use to connect to the repository. The connection must be based on a personal access token. Learn more about service connections [here](https://aka.ms/AA3am5s)."
    },
    {
      "name": "project",
      "type": "pickList",
      "label": "Project",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Specify the name of the project for azure repos",
      "properties": {
        "EditableOptions": "True"
      },
      "visibleRule": "repositoryType = Azure Devops"
    },
    {
      "name": "azureRepoRepositoryName",
      "type": "pickList",
      "label": "Repository Name",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Specify the name of the Azure Repo repository",
      "properties": {
        "EditableOptions": "True"
      },
      "visibleRule": "repositoryType = Azure Devops"
    },
    {
      "name": "branch",
      "type": "string",
      "label": "Branch name",
      "defaultValue": "workspace_publish",
      "required": true,
      "helpMarkDown": "Enter the auto-generated branch within the repository from which packages will be published."
    },
    {
      "name": "ConnectedServiceNameSelector",
      "aliases": [
        "azureConnectionType"
      ],
      "type": "pickList",
      "label": "Azure Synapse workspace connection",
      "required": true,
      "helpMarkDown": "Select the connection that you created for use with your workspace.",
      "defaultValue": "AzureResourceManagerConnection",
      "options": {
        "AzureResourceManagerConnection": "Azure Resource Manager"
      }
    },
    {
      "name": "AzureResourceManagerConnection",
      "aliases": [
        "azureSubscription"
      ],
      "type": "connectedService:AzureRM",
      "label": "Synapse workspace connection type",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Select the managed service connection type that you created to connect to the Synapse workspace.",
      "visibleRule": "ConnectedServiceNameSelector = AzureResourceManagerConnection",
      "properties": {
        "EndpointFilterRule": "ScopeLevel >= deploymentScope"
      }
    },
    {
      "name": "ResourceGroupName",
      "type": "pickList",
      "label": "Synapse workspace resource group",
      "required": true,
      "properties": {
        "EditableOptions": true
      },
      "helpMarkDown": "Select the resource group of the target Synapse workspace."
    },
    {
      "name": "TargetLocation",
      "type": "pickList",
      "label": "Azure region",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Select the Azure region in which the target Synapse workspace is located."
    },
    {
      "name": "TargetWorkspaceName",
      "type": "string",
      "label": "Synapse workspace name",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Enter the Synapse workspace name located in the resource group that you specified."
    },
    {
      "name": "OverrideArmParameters",
      "type": "multiLine",
      "label": "OverrideArmParameters",
      "defaultValue": "None",
      "required": true,
      "helpMarkDown": "Enter any ARM parameters that you want to override, separated by a space, for example, ~paramname name1 ~paramvalue value1 ~paramname name2. You may use a Key Vault task to output.",
      "groupName": "advanced"
    },
    {
      "name": "Environment",
      "type": "pickList",
      "label": "Cloud environment",
      "defaultValue": "prod",
      "required": true,
      "helpMarkDown": "Select the type of cloud environment in which the Synapse workspace is located.",
      "options": {
        "prod": "Azure Public",
        "ppe": "Azure Public PPE",
        "mooncake": "Azure China",
        "fairfax": "Azure US Government",
        "blackforest": "Azure Germany"
      },
      "properties": {
        "EditableOptions": "False"
      },
      "groupName": "advanced"
    }
  ],
  "dataSourceBindings": [
    {
      "target": "repositoryName",
      "endpointId": "$(gitConnection)",
      "dataSourceName": "UserRepositories",
      "resultTemplate": "{ \"Value\" : \"{{full_name}}\", \"DisplayValue\" : \"{{full_name}}\" }"
    },
    {
      "target": "resourceGroupName",
      "endpointId": "$(AzureResourceManagerConnection)",
      "dataSourceName": "AzureResourceGroups"
    },
    {
      "target": "project",
      "endpointId": "$(azureRepoConnection)",
      "dataSourceName": "Projects",
      "resultTemplate": "{ \"Value\" : \"{{{id}}}\", \"DisplayValue\" : \"{{{name}}}\" }"
    },
    {
      "target": "azureRepoRepositoryName",
      "endpointId": "$(azureRepoConnection)",
      "dataSourceName": "Repositories",
      "parameters": {
        "project": "$(project)"
      },
      "resultTemplate": "{ \"Value\" : \"{{{id}}}\", \"DisplayValue\" : \"{{{name}}}\" }"
    },
    {
      "target": "TargetLocation",
      "endpointId": "$(AzureResourceManagerConnection)",
      "dataSourceName": "AzureLocations"
    }
  ],
  "execution": {
    "Node": {
      "target": "index.js"
    }
  }
}