{
  "id": "0e237901-8ece-4bc9-bedf-05ed7f0e98d5",
  "name": "UiPathPackage",
  "friendlyName": "UiPath Package",
  "description": "UiPath Package",
  "author": "UiPath",
  "category": "Utility",
  "visibility": [
    "Build"
  ],
  "demands": [],
  "version": {
    "Major": "0",
    "Minor": "1",
    "Patch": "4"
  },
  "minimumAgentVersion": "1.95.0",
  "instanceNameFormat": "UiPath Package $(message)",
  "groups": [
    {
      "name": "packGroup",
      "displayName": "Pack details",
      "visibleRule": "packageAction = pack",
      "isExpanded": true
    },
    {
      "name": "pushGroup",
      "displayName": "Push details",
      "visibleRule": "packageAction = push",
      "isExpanded": true
    }
  ],
  "inputs": [
    {
      "name": "packageAction",
      "type": "pickList",
      "label": "Package action",
      "required": true,
      "options": {
        "pack": "Pack",
        "push": "Push"
      }
    },
    {
      "name": "platformVersion",
      "type": "pickList",
      "label": "Platform version",
      "required": true,
      "defaultValue": "",
      "groupName": "packGroup"
    },
    {
      "name": "uninstallOptions",
      "type": "pickList",
      "label": "Uninstall options",
      "options": {
        "never": "Never",
        "ifany": "Any version",
        "ifdifferent": "Different versions"
      },
      "helpMarkDown": "Uninstall options: 'Never'-nothing is uninstalled; 'Any version' - uninstalls UiPath platform if installed no matter the version; 'Different versions' - Uninstalls UiPath platform if different version than the selected versions is installed",
      "groupName": "packGroup"
    },
    {
      "name": "licenseCode",
      "type": "string",
      "label": "License code",
      "helpMarkDown": "License code for registering UiPath platform; If none is specified, free version will be used",
      "groupName": "packGroup"
    },
    {
      "name": "projectJsonPath",
      "type": "filePath",
      "label": "Project json path",
      "helpMarkDown": "License code for registering UiPath platform; If none is specified, free version will be used",
      "groupName": "packGroup"
    },
    {
      "name": "outputFolder",
      "type": "string",
      "label": "Output folder",
      "helpMarkDown": "Output folder for package",
      "groupName": "packGroup"
    },
    {
      "input": "orchestratorAddress",
      "type": "string",
      "label": "Orchestrator address",
      "helpMarkDown": "Location of orchestrator where the package should be pushed",
      "groupName": "pushGroup"
    },
    {
      "input": "orchTenant",
      "type": "string",
      "label": "Orchestrator tenant",
      "helpMarkDown": "Orchestrator tenant",
      "groupName": "pushGroup"
    },
    {
      "input": "orchUsername",
      "type": "string",
      "label":"Username",
      "helpMarkDown":"Username for the specified instance of orchestrator",
      "groupName":"pushGroup"
    },
    {
      "input": "orchPassword",
      "type": "string",
      "label":"Password",
      "helpMarkDown":"Password for the specified user",
      "groupName":"pushGroup"
    },
    {
      "input": "packagePath",
      "type": "string",
      "label": "Package path",
      "helpMarkDown": "Location of the package (full name & version)",
      "groupName": "pushGroup"
    },
    {
      "name": "VersionService",
      "type": "connectedService:Generic",
      "label": "UiPath service/server end point",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Select the Fabrikam end point to use. If needed, click on 'manage', and add a new service connection of type 'Fabrikam server connection'"
    }
  ],
  "dataSourceBindings": [
    {
      "endpointId": "$(VersionService)",
      "target": "platformVersion",
      "endpointUrl": "{{endpoint.url}}versions.json",
      "resultSelector": "jsonpath:$.versions[*]",
      "resultTemplate": "{ \"Value\" : \"{{{version}}}\", \"DisplayValue\" : \"{{{version}}}\" }"
    }
  ],
  "sourceDefinitions": [],
  "execution": {
    "PowerShell3": {
      "target": "UiPathPackage.ps1",
      "platforms": [
        "windows"
      ]
    }
  }
}
