{
	"id": "50938938-BF74-4ACD-B7AB-3A7CFC801D8A",
	"name": "DataStarCmdLine",
	"friendlyName": "DataStar Command Line Utility",
	"description": "Executes the DataStar Command Line Utility",
	"category": "DataStar",
	"visibility": [
		"Build",
		"Release"
	],
	"author": "Absolute Technology Limited",
	"version": {
	  "Major": 1,
	  "Minor": 1,
	  "Patch": 18
	},
  "groups": [
    {
      "name": "ConnectionSettings",
      "displayName": "Connection Settings",
      "isExpanded": false
    },
    {
      "name": "AdditionalConnectionSettings",
      "displayName": "Additional Connection Settings",
      "isExpanded": false
    },
    {
      "name": "DeploymentSettings",
      "displayName": "Deployment Settings",
      "isExpanded": false,
      "visibleRule": "ModeType = Deployment"
    },
    {
      "name": "GenerateSettings",
      "displayName": "Generate Settings",
      "isExpanded": false,
      "visibleRule": "ModeType = Generate"
    },
    {
      "name": "AdditionalDeploymentOptions",
      "displayName": "Additional Deployment Options",
      "isExpanded": false,
      "visibleRule": "ModeType = Deployment"
    },
    {
      "name": "LicenseSettings",
      "displayName": "License Settings",
      "isExpanded": false
    }
  ],
  "inputs": [
    {
      "name": "ModeType",
      "type": "pickList",
      "label": "Mode",
      "defaultValue": "Deployment",
      "options": {
        "Deployment": "Deployment",
        "Generate": "Generate"
      },
      "required": true,
      "helpMarkDown": "Select the mode type depending on whether you want to deploy or generate scripts."
    },
    {
      "name": "BasePath",
      "type": "string",
      "label": "Base Path",
      "required": false,
      "helpMarkDown": "The optional path to the DataStar.CmdLine Executable, if not specified the working directory is used."
    },
    {
      "name": "ModeSwitch",
      "type": "string",
      "label": "ModeSwitch",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Indicates the execution mode of the DataStar.CmdLine Executable"
    },
    {
      "name": "ManifestDir",
      "type": "string",
      "label": "Manifest Directory",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "The location of the package (i.e. the parent folder of the manfest file)"
    },
    {
      "name": "TemplateDir",
      "type": "string",
      "label": "TemplateDir",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "The optional templates directory, only required if generating reversal scripts."
    },
    {
      "name": "OutputDir",
      "type": "string",
      "label": "OutputDir",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "The optional output directory, only required if generating reversal scripts."
    },
    {
      "name": "Artifacts",
      "type": "string",
      "label": "Artifacts",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "The optional manifest files to include, defaults to wildcard."
    },
    {
      "name": "HistoryId",
      "type": "string",
      "label": "HistoryId",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "The optional id of the deployment being reversed, used in reversal mode."
    },
    {
      "name": "WorkItem",
      "type": "string",
      "label": "WorkItem",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "The optional work item reference."
    },
    {
      "name": "LicenseKey",
      "type": "connectedService:dlkse",
      "label": "License Key",
      "defaultValue": "",
      "required": true,
      "groupName": "LicenseSettings",
      "helpMarkDown": "The required license key."
    },
    {
      "name": "DataSource",
      "type": "string",
      "label": "Data Source",
      "defaultValue": "",
      "required": false,
      "groupName":  "ConnectionSettings", 
      "helpMarkDown": "The database server and instance"
    },
    {
      "name": "Database",
      "type": "string",
      "label": "Database",
      "defaultValue": "",
      "required": false,
      "groupName":  "ConnectionSettings", 
      "helpMarkDown": "The database name."
    },
    {
      "name": "Username",
      "type": "string",
      "label": "Username",
      "defaultValue": "",
      "groupName": "AdditionalConnectionSettings",
      "required": false,
      "helpMarkDown": "Optional username if not using default credentials"
    },
    {
      "name": "Password",
      "type": "string",
      "label": "Password",
      "defaultValue": "",
      "groupName": "AdditionalConnectionSettings",
      "required": false,
      "helpMarkDown": "Optional password if not using default credentials. **Use a Variable to encrypt the Password.**"
    },
    {
      "name": "Audit",
      "type": "boolean",
      "label": "Enable Auditing",
      "defaultValue": "true",
      "required": false,
      "helpMarkDown": "The enable auditing switch, to generate audit records in the target database."
    },
    {
      "name": "AuditTable",
      "type": "string",
      "label": "Audit Table Name",
      "defaultValue": "",
      "groupName": "advanced",
      "required": false,
      "helpMarkDown": "Optional override for the audit database table name."
    },
    {
      "name": "ReversalTable",
      "type": "string",
      "label": "Reversal Table Name",
      "defaultValue": "",
      "groupName": "advanced",
      "required": false,
      "helpMarkDown": "Optional override for the reversal database table name."
    },
    {
      "name": "WithReversal",
      "type": "boolean",
      "label": "With Reversal",
      "defaultValue": "false",
      "required": false,
      "helpMarkDown": "The optional with reversal switch, to generate reversal scripts."
    },
    {
      "name": "DeleteOverride",
      "type": "boolean",
      "label": "Delete Override",
      "defaultValue": "false",
      "required": false,
      "helpMarkDown": "The optional with delete override switch, to override delete exclusions that have been specified in the templates."
    },
    {
      "name": "FailOnStderr",
      "type": "boolean",
      "label": "Fail on Standard Error",
      "defaultValue": "true",
      "required": false,
      "helpMarkDown": "If this is true, this task will fail if any errors are written to the StandardError stream.",
      "groupName": "advanced"
    },
    {
      "name": "RepositoryUri",
      "type": "string",
      "label": "TFS Repository Uri",
      "defaultValue": "",
      "groupName": "advanced",
      "required": false,
      "helpMarkDown": "The TFS Server Url (defaults to the BUILD_REPOSITORY_URI)"
    }
  ],
	"instanceNameFormat": "Execute the DataStar Command Line Utility",
	"execution": {
		"PowerShell3": {
			"target": "powershell.ps1",
			"platforms": [
				"windows"
			]
		}
	},
	"messages": {}
}
