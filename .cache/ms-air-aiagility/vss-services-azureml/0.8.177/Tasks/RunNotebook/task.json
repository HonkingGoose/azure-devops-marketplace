{
    "id": "d9bb92c8-57b5-4fa4-b400-280d87655831",
    "name": "RunNotebook",
    "friendlyName": "Run Notebook on AzureML",
    "description": "AzureML Pipelines Task for running Jupyter Notebooks on AML Compute",
    "helpMarkDown": "[More Information](https://go.microsoft.com/fwlink/?linkid=848891)",
    "category": "Utility",
    "visibility": [
        "Build",
        "Release"
    ],
    "author": "ms-air-aiagility",
    "version": {
        "Major": 0,
        "Minor": 8,
        "Patch": 119
    },
    "minimumAgentVersion": "2.115.0",
    "instanceNameFormat": "Jupyter Notebook",
    "groups": [
        {
            "name": "advanced",
            "displayName": "Advanced",
            "isExpanded": false
        }
    ],
    "inputs": [
        {
            "name": "connectedServiceName",
            "aliases": [
                "azureSubscription"
            ],
            "type": "connectedService:azuremlws",
            "label": "AzureML Workspace",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Select the Azure Machine Learning Workspace"
        },
        {
            "name": "targetType",
            "type": "picklist",
            "label": "Preferred Compute Type",
            "required": false,
            "defaultValue": "CPU",
            "options": {
                "CPU": "CPU on demand",
                "GPU": "GPU on demand",
                "custom": "Pre-created compute"
            },
            "helpMarkDown": "Select the type of compute on which notebooks will be run."
        },
        {
            "name": "computeTarget",
            "type": "string",
            "label": "Compute Target Name",
            "visibleRule": "targetType = custom",
            "defaultValue": "",
            "helpMarkDown": "Name of pre-created cluster in the connected Azure ML Workspace.",
            "required": true
        },
        {
            "name": "pathFilter",
            "type": "filePath",
            "label": "Path to ipynb file(s) to run on AzureML",
            "defaultValue": "**/*.ipynb",
            "helpMarkDown": "Pattern to search for ipynb file(s) to run.\n\nYou can separate multiple patterns with a semicolon, and you can make a pattern negative by prefixing it with '!'. Example: `**\\*.ipynb;!**\\*.Tests.ipynb`",
            "required": true
        },
        {
            "name": "condaDependencies",
            "type": "string",
            "label": "Dependency file path relative to notebook",
            "defaultValue": "env*.yml",
            "helpMarkDown": "Pattern relative to notebook location to search for explicit specification file to build conda environment.\n\nThe file is not required, but if this path filter matches more than one file the task will fail.",
            "required": false
        },
        {
            "name": "requiredFiles",
            "type": "picklist",
            "label": "Files required by notebook",
            "defaultValue": "notebook",
            "options": {
                "notebook": "Only notebook file",
                "filesInFolder": "All files in notebook folder",
                "entireFolder": "Notebook folder and sub-folders"
            },
            "helpMarkDown": "Files required by notebook will be copied to AML Compute.",
            "required": false,
            "groupName": "advanced"
        },
        {
            "name": "commonFiles",
            "type": "filePath",
            "label": "Common files required by all notebooks",
            "defaultValue": "",
            "helpMarkDown": "Common files required by all notebooks. Separate multiple file patterns with a semicolon.",
            "required": false,
            "groupName": "advanced"
        },
        {
            "name": "dockerBaseImage",
            "type": "string",
            "label": "Docker Base Image",
            "defaultValue": "",
            "helpMarkDown": "Set this value to override the default base Docker image.",
            "required": false,
            "groupName": "advanced"
        },
        {
            "name": "failOnNotebookError",
            "type": "boolean",
            "label": "Fail on error in notebook cell",
            "defaultValue": "false",
            "helpMarkDown": "If this is true, this task will fail if an error is thrown in a notebook cell. Otherwise the task will rely on the exit code to determine failure.",
            "required": false,
            "groupName": "advanced"
        }
    ],
    "execution": {
        "Node": {
            "target": "index.js"
        }
    },
    "messages": {
        "NoMatchingNotebooks": "No matching files were found with search pattern: %s",
        "NotAFile": "The given path was not a file: %s",
        "MultipleConfigFiles": "Multiple configuration files found: $s",
        "NoComputeTarget": "Missing required compute cluster name"
    }
}