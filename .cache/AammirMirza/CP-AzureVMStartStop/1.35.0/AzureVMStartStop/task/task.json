{
    "id": "75b3c2db-38d9-4eb8-b2bc-e1f6c88a382f",
    "name": "AzureVMStartStop",
    "friendlyName": "Azure VM Start/Stop",
    "description": "Help reduce Azure compute cost. Lower environment VMs can be Start/Stop/Restart via Azure pipelines.",
    "helpUrl": "",
    "helpMarkDown": "[Learn more about this task](https://docs.microsoft.com/en-us/azure/devops/organizations/billing/buy-basic-access-add-users?view=azure-devops)",
    "category": "Utility",
    "visibility": [
        "Build",
        "Release"
    ],
    "runsOn": [
        "Agent",
        "DeploymentGroup"
    ],
    "author": "Aammir Mirza",
    "version": {
        "Major": 1,
        "Minor": 35,
        "Patch": 0
    },
    "releaseNotes": "Initial commit",
    "minimumAgentVersion": "2.115.0",
    "showEnvironmentVariables": true,
    "groups": [
        {
            "name": "advanced",
            "displayName": "Advanced",
            "isExpanded": false
        }
    ],
    "inputs": [
        {
            "name": "VMList",
            "type": "multiLine",
            "label": "List of VMs E.g: 'VM1,VM2,VM3'",
            "required": false,
            "defaultValue": "",
            "groupName": "advanced",
            "properties": {
                "resizable": "true",
                "rows": "5",
                "maxLength": "20000"
            },
            "helpMarkDown": "Delimeted list of Virtual Machines within same accesible scope of SPN. "
        },
        {
            "name": "ResourceGroupName",
            "type": "string",
            "label": "ResourceGroupName",
            "required": false,
            "groupName": "advanced",
            "helpMarkDown": "ResourceGroup name, If performing for specific set of VMs within same Resource Group"
        },
        {
            "name": "Action",
            "type": "pickList",
            "label": "Action",
            "required": true,
            "defaultValue": "Start",
            "helpMarkDown": "",
            "options": {
                "Start": "Start",
                "Stop": "Stop",
                "Restart": "Restart"
                }
        },
        {
            "name": "ConnectedServiceName",
            "type": "connectedService:AzureRM",
            "label": "Azure RM Subscription",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Select the Azure Resource Manager subscription for the deployment."
        },
        {
            "name": "vmsExcludedFromAction",
            "type": "multiLine",
            "label": "vmsExcludedFromAction",
            "required": false,
            "defaultValue": "",
            "properties": {
                "resizable": "true",
                "rows": "5",
                "maxLength": "20000"
            },
            "helpMarkDown": "List of VMs with ',' silgle quote and delimeted, this VMs will be excluded from action",
            "groupName": "advanced"
        }
    ],
    "instanceNameFormat": "Azure VM Start/Stop",
    "execution": {
        "PowerShell3": {
          "target": "$(currentDirectory)/AzureVMStartStopTask.ps1",
          "platforms": [
            "windows"
        ],
          "workingDirectory": "$(currentDirectory)"
        }
      },
      "messages": {
          "GeneratingScript": "Generating script.",
          "JS_InvalidErrorActionPreference": "Invalid ErrorActionPreference '%s'. The value must be one of: 'Stop', or 'SilentlyContinue'"
      }
    }