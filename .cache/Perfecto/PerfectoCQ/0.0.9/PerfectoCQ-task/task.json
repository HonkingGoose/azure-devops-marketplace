{
  "id": "a615cd40-5e41-11e5-bee7-bd6eddb93f41",
  "name": "PerfectoCQ",
  "friendlyName": "Perfecto Mobile Configuration",
  "description": "Perfecto Mobile Configuration for Web and Device Application Testing",
  "author": "Uzi Eilon",
  "helpMarkDown": "Configures and uploads applications [*.apk ot *.ipa] to Perfecto Mobile cloud v1.0 for Testing. [More Information](https://community.perfectomobile.com/series/25287/) ",
  "category": "Test",
  "visibility": [
    "Build",
    "Release"
  ],
  "demands": [ ],
  "version": {
    "Major": "0",
    "Minor": "1",
    "Patch": "0"
  },
  "minimumAgentVersion": "1.83.0",
  "instanceNameFormat": "PerfectoCQ $(message)",
  "inputs": [
    {
      "name": "connectedServiceName",
      "type": "connectedService:Generic",
      "label": "Perfecto Connection",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Perfecto Mobile account details - create new endpoint with your perfecto account"
    },

    {
      "name": "applicationTarget",
      "type": "radio",
      "label": "Application Target",
      "defaultValue": "web",
      "required": true,
      "options": {
        "web": "Web",
        "device": "NativeApp"
      },
      "helpMarkDown": "Target testing type, native web app or web site"
    },

    {
      "name": "appAction",
      "type": "pickList",
      "label": "Action",
      "defaultValue": "Upload",
      "required": false,
      "visibleRule": "applicationTarget = device",
      "options": {
        "Upload": "Upload",
        "Delete": "Delete"
      },
      "helpMarkDown": "Action for Perfecto Mobile upload - upload the app to perfecto cloud and prepre the test evnoirment or delete - clean the app from the cloud "
    },

    {
      "name": "appName",
      "type": "string",
      "label": "APK or IPA file name ",
      "defaultValue": "",
      "required": false,
      "visibleRule": "applicationTarget = device",
      "helpMarkDown": "name for the APK ot the IPA"
    },
        
    {
      "name": "FromLib",
      "type": "string",
      "label": "Appilcation Folder",
      "defaultValue": "$(Agent.BuildDirectory)\\bin",
      "required": false,
      "visibleRule": "appAction = Upload",
      "helpMarkDown": "location of the latest IPA ot APK on the builf machine"
    },
    {
      "name": "ToLib",
      "type": "string",
      "label": "Folder in Perfecto Cloud",
      "defaultValue": "PRIVATE:MS\\",
      "required": false,
      "visibleRule": "applicationTarget = device",
      "helpMarkDown": "upload folder in perfecto moible repository, can be PUBLIC: or PRIVATE: location, if the folder is not exists the system will create it "
    },
    {
      "name": "bundle",
      "type": "string",
      "label": "Bundle Id or Activity Id",
      "defaultValue": "",
      "required": false,
      "visibleRule": "applicationTarget = device",
      "helpMarkDown": "Bundle id or Activity id to start the app from Appium"
    },
    {
      "name": "deviceGroup",
      "type": "filePath",
      "label": "Target Devices List File",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Target device, link to JSON file which contains the devices properties, the file can contains more than on device , in this case the system will execute it in parallel on all of the devices  "
    }
  ],
  "execution": {
    "Node": {
      "target": "perfectoExe.js",
      "argumentFormat": ""
    },
    "PowerShell": {
      "target": "$(currentDirectory)\\perfectoExe.ps1",
      "argumentFormat": "",
      "workingDirectory": "$(currentDirectory)"
    }
  }
}
