{
    "id": "A6D28082-1111-0804-1005-000000000003",
    "name": "AGD-EFCoreMigration",
    "friendlyName": "EF Core Migration",
    "description": "Generate a EF Core Migration script and update your database.",
    "author": "Anthony Guichette-Debord",
    "helpMarkDown": "",
    "category": "Utility",
    "visibility": [
      "Build",
      "Release"
    ],
    "demands": [],
    "version": {
      "Major": "1",
      "Minor": "0",
      "Patch": "12"
    },
    "minimumAgentVersion": "1.83.0",
    "instanceNameFormat": "EF Core Migration",
    "groups": [
      {
          "name":"database",
          "displayName":"Database",
          "isExpanded":false
      },
      {
        "name":"advanced",
        "displayName":"Advanced",
        "isExpanded":false
      }
    ],
    "inputs": [
      { 
        "name": "useSDK",
        "type": "boolean",
        "label": "Use DotNet Core SDK",
        "defaultValue": "true",
        "required":true,
        "helpMarkDown": "Check this option if SDK is installed on your server."
      },{ 
        "name": "packageFile",
        "type": "filePath",
        "label": "Package",
        "defaultValue": "",
        "required":true,
        "helpMarkDown": "ZIP Package file including the application binaries",
        "visibleRule": "useSDK = true"
      },{ 
        "name": "folder",
        "type": "string",
        "label": "Application directory",
        "defaultValue": "",
        "required":true,
        "helpMarkDown": "",
        "visibleRule": "useSDK = false"
      },{ 
        "name": "startupProjectName",
        "type": "string",
        "label": "Startup Project Name",
        "defaultValue": "",
        "required":true,
        "helpMarkDown": ""
      },{ 
        "name": "dataProjectName",
        "type": "string",
        "label": "Data Project Name",
        "defaultValue": "",
        "required":true,
        "helpMarkDown": ""
      },{ 
        "name": "dataContext",
        "type": "string",
        "label": "Data Context",
        "defaultValue": "",
        "required":false,
        "helpMarkDown": "(Optional) Leave empty if you have only one data context."
      },
      { 
        "name": "efMigTableName",
        "type": "string",
        "label": "EF Migration History Table Name",
        "defaultValue": "__EFMigrationsHistory",
        "required":true,
        "helpMarkDown": "",
        "groupName":"database"
      },
      { 
        "name": "connectionString",
        "type": "string",
        "label": "Connection String",
        "defaultValue": "",
        "required":true,
        "helpMarkDown": "",
        "groupName":"database"
      },
      { 
        "name": "deploy",
        "type": "boolean",
        "label": "Update Database",
        "defaultValue": "true",
        "required":true,
        "helpMarkDown": "Check this option if you want to update the database."
      },
      { 
        "name": "targetFolder",
        "type": "string",
        "label": "Target script Folder",
        "defaultValue": "",
        "required":false,
        "helpMarkDown": "",
        "groupName":"advanced"
      }
    ],
    "execution": {
      "PowerShell": {
        "target": "$(currentDirectory)\\EFCore-Migration.ps1",
        "argumentFormat": "",
        "workingDirectory": "$(currentDirectory)"
      }
    }
  }