{
	"id": "95170664-b64e-4571-9cd4-936b3a626292",
	"name": "nventiveCanaryUpdater",
	"friendlyName": "Canary Updater",
	"description": "A task to update a Canary build.",
	"helpMarkDown": "[nventive](http://www.nventive.com/)",
	"category": "Build",
	"author": "nventive",
	"version": {
		"Major": 3,
		"Minor": 0,
		"Patch": 293
	},
	"visibility": [
		"Build"
	],
	"demands": [
		"msbuild",
		"nuget"
	],
	"instanceNameFormat": "Canary Update",
	"groups": [
		{
			"name": "git",
			"displayName": "Git options",
			"isExpanded": true
		},
		{
			"name": "log",
			"displayName": "Log Options",
			"isExpanded": true
		},
		{
			"name": "advanced",
			"displayName": "Advanced",
			"isExpanded": false
		}
	],
	"inputs": [
		{
			"name": "nugetFeed",
			"type": "pickList",
			"label": "Source Feed",
			"defaultValue": "",
			"required": true,
			"helpMarkDown": "The NuGet feed from which to update the packages",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "targetBranch",
			"type": "string",
			"label": "Target Branch",
			"groupName": "git",
			"defaultValue": "origin/master",
			"required": true,
			"helpMarkDown": "The branch to merge changes from.",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "gitUserName",
			"type": "string",
			"label": "Git user name",
			"groupName": "git",
			"required": false,
			"helpMarkDown": "The email for Git to use when executing operations.",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "gitUserEmail",
			"type": "string",
			"label": "Git user email",
			"groupName": "git",
			"required": false,
			"helpMarkDown": "The name for Git to use when executing operations.",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "pushBranch",
			"type": "boolean",
			"label": "Push updated branch",
			"groupName": "git",
			"defaultValue": false,
			"required": false,
			"helpMarkDown": "Push the updated branch to the repository. The build service must be given the right to contribute and create branches in the repository.",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "summaryFile",
			"type": "filePath",
			"label": "Summary file",
			"groupName": "log",
			"defaultValue": null,
			"required": false,
			"helpMarkDown": "Path to a file where to write the package update and git merge summary",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "nugetVersion",
			"type": "string",
			"label": "Special Version",
			"groupName": "advanced",
			"defaultValue": "",
			"required": false,
			"helpMarkDown": "The special version to update packages to",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "excludeTag",
			"type": "string",
			"label": "Tag to exclude",
			"groupName": "advanced",
			"defaultValue": "",
			"required": false,
			"helpMarkDown": "Exclude versions with this tag in the NuGet update",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "useStableIfMoreRecent",
			"type": "boolean",
			"label": "Use stable version if more recent",
			"groupName": "advanced",
			"defaultValue": false,
			"required": false,
			"helpMarkDown": "Indicates whether to use a stable version instead of the special version if a higher version if available",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "allowDowngrade",
			"type": "boolean",
			"label": "Allow downgrade",
			"groupName": "advanced",
			"defaultValue": false,
			"required": false,
			"helpMarkDown": "Indicates whether the packages can be downgraded if the matching version is lower",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "ignorePackages",
			"type": "string",
			"label": "Ignore Packages",
			"groupName": "advanced",
			"defaultValue": null,
			"required": false,
			"helpMarkDown": "Indicates which packages (separated by ';') to exclude from the update",
			"properties": {
				"DisableManageLink": "True"
			}
		},
		{
			"name": "updatePackages",
			"type": "string",
			"label": "Update Packages",
			"groupName": "advanced",
			"defaultValue": null,
			"required": false,
			"helpMarkDown": "Indicates which packages (separated by ';') to update. If null, all found pacakges will be updated.",
			"properties": {
				"DisableManageLink": "True"
			}
		}
	],
	"dataSourceBindings": [
		{
			"target": "nugetFeed",
			"endpointId": "tfs:feed",
			"endpointUrl": "{{endpoint.url}}/_apis/packaging/feeds",
			"resultSelector": "jsonpath:$.value[*]",
			"resultTemplate": "{ \"Value\" : \"{{{id}}}\", \"DisplayValue\" : \"{{{name}}}\" }"
		}
	],
	"sourceDefinitions": [
	],
	"execution": 
	{
		"Node": {
			"target": "task.js"
		}
	}
}
