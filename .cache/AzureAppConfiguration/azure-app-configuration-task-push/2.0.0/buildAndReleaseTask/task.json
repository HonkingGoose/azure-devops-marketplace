{
    "id":  "014d1f42-f7ad-4418-b165-5bf03802417e",
    "name":  "AzureAppConfigurationPush",
    "friendlyName":  "Azure App Configuration Push",
    "description":  "Push key-values to an Azure App Configuration instance",
    "helpUrl":  "https://marketplace.visualstudio.com/items?itemName=AzureAppConfiguration.dev-azure-app-configuration-task-push",
    "helpMarkDown":  "Email AzureAppConfig@microsoft.com for questions.",
    "category":  "Utility",
    "author":  "Microsoft Corporation",
    "version":  {
                    "Major":  2,
                    "Minor":  0,
                    "Patch":  0
                },
    "instanceNameFormat":  "Azure App Configuration: $(ConfigstoreName)",
    "minimumAgentVersion":  "2.144.0",
    "inputs":  [
                   {
                       "name":  "ConnectedServiceName",
                       "aliases":  [
                                       "azureSubscription"
                                   ],
                       "type":  "connectedService:AzureRM",
                       "label":  "Azure subscription",
                       "defaultValue":  "",
                       "required":  true,
                       "helpMarkDown":  "Select the Azure Subscription for the Azure App Configuration instance.",
                       "groupName":  "ConfigurationStore"
                   },
                   {
                       "name":  "ConfigstoreName",
                       "type":  "pickList",
                       "label":  "App Configuration Name",
                       "required":  true,
                       "helpMarkDown":  "Provide the name of an existing [Azure App Configuration](https://docs.microsoft.com/en-us/azure/azure-app-configuration/concept-key-value).",
                       "groupName":  "ConfigurationStore",
                       "properties":  {
                                          "EditableOptions":  "True"
                                      }
                   },
                   {
                       "name":  "ConfigurationFile",
                       "type":  "filePath",
                       "label":  "Configuration File Path",
                       "defaultValue":  "",
                       "required":  true,
                       "groupName":  "Source",
                       "helpMarkDown":  "the path to the configuration file (supported: yaml, json, properties)",
                       "properties":  {
                                          "EditableOptions":  "True"
                                      },
                       "validation":  {
                                          "expression":  "isMatch(value, \u0027.+\\.(json|ya?ml|properties)$\u0027, \u0027IgnoreCase\u0027)",
                                          "message":  "Supported file types are: .yml, .yaml, .json, and .properties"
                                      }
                   },
                   {
                       "name":  "Separator",
                       "type":  "pickList",
                       "label":  "Separator",
                       "required":  true,
                       "groupName":  "Source",
                       "helpMarkDown":  "separator used to flatten the configuration file (json \u0026 yaml files)",
                       "options":  {
                                       ".":  ".  (Period)",
                                       "/":  "/  (Forward Slash)",
                                       ":":  ":  (Colon)",
                                       ";":  ";  (Semicolon)",
                                       ",":  ",  (Comma)",
                                       "-":  "-  (Hyphen)",
                                       "_":  "_  (Underscore)",
                                       "__":  "__ (Double Underscore)"
                                   }
                   },
                   {
                       "name":  "Depth",
                       "type":  "string",
                       "label":  "Depth",
                       "defaultValue":  "",
                       "required":  false,
                       "groupName":  "Source",
                       "helpMarkDown":  "max depth to flatten to in configuration file (json and yaml files)",
                       "properties":  {
                                          "EditableOptions":  "True"
                                      }
                   },
                   {
                       "name":  "Prefix",
                       "type":  "string",
                       "label":  "Prefix",
                       "defaultValue":  "",
                       "required":  false,
                       "helpMarkDown":  "a prefix to append to all keys in the configuration file",
                       "groupName":  "Key-valueOptions",
                       "properties":  {
                                          "EditableOptions":  "True"
                                      }
                   },
                   {
                       "name":  "Label",
                       "type":  "string",
                       "label":  "Label",
                       "defaultValue":  "",
                       "required":  false,
                       "helpMarkDown":  "Specifies which label should be used when selecting key-values from App Configuration. If no label is provided then key-values with the _null_ label will be retrieved. The following characters are not allowed: `,` `*`.",
                       "groupName":  "Key-valueOptions",
                       "properties":  {
                                          "EditableOptions":  "True"
                                      }
                   },
                   {
                       "name":  "ContentType",
                       "type":  "string",
                       "label":  "Content Type",
                       "defaultValue":  "",
                       "required":  false,
                       "helpMarkDown":  "a content type to append to all keys in the configuration file",
                       "groupName":  "Key-valueOptions",
                       "properties":  {
                                          "EditableOptions":  "True"
                                      }
                   },
                   {
                       "name":  "Tags",
                       "type":  "multiLine",
                       "label":  "Tags",
                       "defaultValue":  "",
                       "required":  false,
                       "helpMarkDown":  "Specifies one or more tag that should be added to key-value settings being pushed to App Configuration. Tags should be of a valid JSON format and can span multiple lines. Example: {\"tag1\": \"value1\", \"tag2\": \"value2\"}",
                       "groupName":  "Key-valueOptions",
                       "properties":  {
                                          "EditableOptions":  "True"
                                      }
                   },
                   {
                       "name":  "Strict",
                       "type":  "boolean",
                       "label":  "Delete all other Key-Values in store with the specified prefix and label",
                       "defaultValue":  false,
                       "required":  true,
                       "groupName":  "Key-valueOptions",
                       "helpMarkDown":  "Checking this to true removes all key-value settings in the configuration store with the defined prefix AND label. (In Key-Value Settings)",
                       "properties":  {
                                          "EditableOptions":  "True"
                                      }
                   }
               ],
    "groups":  [
                   {
                       "name":  "ConfigurationStore",
                       "displayName":  "Configuration Store",
                       "isExpanded":  true
                   },
                   {
                       "name":  "Source",
                       "displayName":  "Source",
                       "isExpanded":  true
                   },
                   {
                       "name":  "Key-valueOptions",
                       "displayName":  "Key-Value Options",
                       "isExpanded":  false
                   }
               ],
    "dataSourceBindings":  [
                               {
                                   "target":  "ConfigstoreName",
                                   "endpointId":  "$(ConnectedServiceName)",
                                   "endpointUrl":  "{{{endpoint.url}}}/subscriptions/{{{endpoint.subscriptionId}}}/providers/Microsoft.AppConfiguration/configurationStores?api-version=2020-06-01",
                                   "resultSelector":  "jsonpath:$.value[*].name"
                               }
                           ],
    "execution":  {
                      "Node10":  {
                                     "target":  "index.js"
                                 }
                  }
}
